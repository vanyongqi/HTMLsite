function uigs_getCookie(a){return uigs_cookieArray[a]}function uigs_getCookiePara(){var a="";if("undefined"!=typeof uigs_para)if(void 0===uigs_para.uigs_cookie);else{var b=uigs_para.uigs_cookie.split(",");for(i in b)void 0!==uigs_getCookie(b[i])&&"SUV"!=b[i]&&(a=""==a?b[i]+"="+uigs_getCookie(b[i]):a+"&"+b[i]+"="+uigs_getCookie(b[i]))}return encodeURIComponent(a)}function uigs_getPingbackhead(a){if("undefined"!=typeof uigs_para&&void 0!==uigs_para.uigs_productid){uigs_c=escape(1e3*(new Date).getTime()+Math.round(1e3*Math.random())),r="function"==typeof encodeURIComponent?encodeURIComponent(document.referrer):document.referrer;var b="";b+=void 0!==a?"?uigs_productid="+a:"?uigs_productid="+uigs_para.uigs_productid,b+="&uigs_t="+uigs_c,void 0===uigs_para.uigs_cookie||(b+="&uigs_cookie="+uigs_getCookiePara()),void 0!==uigs_para.uigs_uuid&&(b+="&uigs_uuid="+uigs_para.uigs_uuid);for(i in uigs_para)"uigs_cookie"==i||"uigs_uuid"==i||"uigs_productid"==i||(b+="&"+encodeURIComponent(i)+"="+encodeURIComponent(uigs_para[i]));return b+="&uigs_version="+uigs_version+"&uigs_refer="+r}return""}function uigs_pv(){if(uigs_getCookie("SUV")||(uigs_c=escape(1e3*(new Date).getTime()+Math.round(1e3*Math.random())),cookie="SUV="+uigs_c+";path=/;expires=Tue, 19-Jan-2046 00:00:00 GMT;domain=sogou.com"),"undefined"!=typeof uigs_para&&void 0!==uigs_para.uigs_productid){uigs_staytime<0&&0-uigs_staytime;var a=uigs_pvpingbackurl+uigs_getPingbackhead(),b=uigs_pbs.length;uigs_pbs[b]=new Image,uigs_pbs[b].src=a}}function uigsPB(a,b){if("undefined"!=typeof uigs_para&&void 0!==uigs_para.uigs_productid){a.indexOf("script")>=0&&(a="");var c=uigs_staytime;uigs_staytime<0&&(c=0-uigs_staytime);var d=uigs_clpingbackurl;d+=void 0!==b?uigs_getPingbackhead(b):uigs_getPingbackhead(),d+="&uigs_st="+parseInt(((new Date).getTime()-c)/1e3)+"&uigs_cl="+encodeURIComponent(a);var e=uigs_pbs.length;uigs_pbs[e]=new Image,uigs_pbs[e].src=d}}function uigs_iecompattest(){return document.compatMode&&"BackCompat"!=document.compatMode?document.documentElement:document.body}function uigs_onbeforeunload(){uigs_staytime>0&&(st="close="+parseInt(((new Date).getTime()-uigs_staytime)/1e3),uigsPB(st),uigs_staytime=0-uigs_staytime)}function Detail(category,tag,randomList){function DataManager(){var data=[],blocks=[],fromItem,minPn=0,maxPn=2400,requestImgPerBlock=48,isFirst=!0,N=["/pics/channel/getAllRecomPicByTag.jsp?category=",encodeURIComponent(category),"&tag=",encodeURIComponent(tag),"&len=48"];"壁纸"==category&&(N.push("&width="),N.push(resolutionArr[resolutionIndex].w),N.push("&height="),N.push(resolutionArr[resolutionIndex].h));var tempUrl=N.join("");void 0===DataManager._initialized&&($.extend(DataManager.prototype,{storeData:function(tData,blockIds){if("string"==typeof tData)try{eval("var tempData="+tData)}catch(a){return!1}else var tempData=tData;var items=tempData.all_items||[];if(maxPn=tempData.maxEnd,maxEnd=maxPn,tempData.fromItem&&(fromItem=tempData.fromItem,utils.zoomItem(fromItem)),tempData.groupList){fromItem=tempData.groupList;for(var j=0;j<fromItem.length;j++)fromItem[j]=utils.zoomItem(fromItem[j]),fromItem[j].gindex=j,fromItem[j].rindex=did,fromItem[j].glen=fromItem.length}for(var startIndex=blockIds[0]*requestImgPerBlock,itemLen=items.length,si=null,i=0;i<itemLen;i++){var itemElement=items[i],item,index=i+startIndex;if(itemElement instanceof Array)for(var j=0;j<itemElement.length;j++)itemElement[j]=utils.zoomItem(itemElement[j]),itemElement[j].gindex=j,itemElement[j].rindex=index,itemElement[j].glen=itemElement.length;else itemElement=utils.zoomItem(items[i]);item=itemElement,item.rindex=index,fromItem&&groupIndex<0&&(index==did&&(fromItem.rindex=index),fromItem.id==item.id&&(si=item)),data[index]=item}si?currentDid=si.rindex:fromItem&&groupIndex<0&&(fromItem.rindex?data[fromItem.rindex]=fromItem:(fromItem.rindex=0,data[0]=fromItem,0==maxPn&&(maxPn++,maxEnd++))),fromItem&&groupIndex>=0&&"明星"==category&&(fromItem.rindex=currentDid,data[currentDid]=fromItem);for(var r=0;r<blockIds.length;r++)blocks[blockIds[r]]=2},fetchData:function(a,b,c,d,e){a=Math.min(Math.max(a,minPn),maxPn-1),b=Math.min(Math.max(b,minPn),maxPn);var f=this.getBlock(a,b,void 0),g=this.getBlock(a,b,1);if(0==f.length&&0==g.length)return!0;var h,i=f[0]*requestImgPerBlock,j=this.getUrl(i),k=this;h=function(a){return!!k.storeData(a,f)},$.ajax({url:j,async:d,success:h});for(var l=0,m=f.length;l<m;l++)blocks[f[l]]=2!=blocks[f[l]]?1:2},getDataByDid:function(a,b){if(!(a<0)){var c=function(a){callBack&&callBack.apply(window)};this.fetchData(a,a,imageid,b,c)}},getBlock:function(a,b,c){var d=Math.floor(a/requestImgPerBlock),e=Math.floor(b/requestImgPerBlock);e=Math.max(e,d);for(var f=[],g=d;g<=e;g++)blocks[g]==c&&f.push(g);return f},getUrl:function(a){var b=tempUrl+"&start="+a;return fromItem||(b+="&imageid="+imageid,b+="&groupIndex="+groupIndex),b},getMaxEnd:function(){return maxPn},isReady:function(a){return a<0||this.getBlock(a,a,2).length>0},getData:function(a,b){return data.slice(a,b+1)},getDataByIndex:function(a,b){return data[a]instanceof Array&&-1!=b?data[a][b]:data[a]}}),DataManager._initialized=!0)}function ViewPort(){var a=$("#left_content"),b=$("#right_content"),c=$("#middle_img_content"),d=$(".list-wrap");void 0===ViewPort._initialized&&($.extend(ViewPort.prototype,{resize:function(e,f){e<=Constant.minWidth?(a.css("width",Constant.minWidth-Constant.rightContentWidth),a.css("height",f),c.css("width",Constant.minWidth-Constant.rightContentWidth),d.css("width",Constant.minWidth-Constant.rightContentWidth),b.css("left",Constant.minWidth-Constant.rightContentWidth),b.hide()):(a.css("width",e-Constant.rightContentWidth),a.css("height",f),c.css("width",e-Constant.rightContentWidth),d.css("width",e-Constant.rightContentWidth),b.css("left",e-Constant.rightContentWidth),b.css("height",f-30),b.show())}}),ViewPort._initialized=!0)}function ImgDetail(){function a(a){if(a.srcElement&&("IMG"==a.srcElement.nodeName||"img"==a.srcElement.nodeName)||a.target&&("IMG"==a.target.nodeName||"img"==a.target.nodeName)){var b=dataManager.getDataByIndex(currentDid,currentGroupDid);uigsPB("enteroripage|"+b.page_url),window.open(b.page_url)}}var b,c,d=$(".img-box").bind("click",a),e=$(".btn-prev").bind("click",{direct:-1},function(a){nextPic(a),uigsPB("change_clkleft")}),f=$(".btn-next").bind("click",{direct:1},function(a){nextPic(a),uigsPB("change_clkright")}),g=$("#left_content"),h=$("#middle_img_content"),i=$("#pic_title"),j=$("#right_content"),k=$("#circleBox"),l=$("#shituBtn"),m=[null,null,null,null,null,null],n=6,o=0;if(void 0===ImgDetail._initialized){$.extend(ImgDetail.prototype,{resize:function(a,i,l){b=a-Constant.rightContentWidth,c=l?i-Constant.headHeight-Constant.botInfoHeight:i-Constant.headHeight,h.css({height:c}),d.css({width:a-Constant.rightContentWidth,height:c}),e.css({height:c-20}),f.css({height:c-20}),e.css({width:b/2}),f.css({width:b/2}),f.css({left:b/2});var m=dataManager.getDataByIndex(currentDid,currentGroupDid);if(m){var n=utils.zoomImg(b,c,m.width,m.height);"搞笑"==category&&(n=utils.zoomImgByWidth(b,c,m.width,m.height)),d.find("img").first().attr({width:n.width,height:n.height}),"搞笑"==category&&(n.height<c?(h.css({height:c}),d.css({height:c}),e.css({height:c-20}),f.css({height:c-20}),g.css("height",c+Constant.botInfoHeight+Constant.headHeight),j.css("height",c+Constant.botInfoHeight+Constant.headHeight-30)):(d.css({height:n.height}),e.css({height:n.height-20}),f.css({height:n.height-20}),g.css({height:n.height+Constant.botInfoHeight+Constant.headHeight+30}),j.css({height:n.height+Constant.botInfoHeight+Constant.headHeight}),h.css({height:n.height})));var o=b-(b-n.width)/2-100+19,p=(c-n.height)/2-8;k.css({top:p+"px",left:o+"px"})}},firstShowPic:function(a){this.removeExpireCacheImg(-1,a.rindex),this.cacheNextImg(dataManager.getData(a.rindex,a.rindex+n-1)),this.renderBigPic(a)},changeBigPic:function(a,b,c){this.removeExpireCacheImg(a,b.rindex),this.cacheNextImg(dataManager.getData(b.rindex,b.rindex+n-1)),this.renderBigPic(b)},renderBigPic:function(a){var i=utils.zoomImg(b,c,a.width,a.height);if("搞笑"==category&&(i=utils.zoomImgByWidth(b,c,a.width,a.height)),d.find("img").first().remove(),a.gindex){var l=a.gindex;m[o]&&m[o].grp&&m[o].grp[l]&&"success"==m[o].grp[l].status?d.prepend(m[o].grp[l].img.attr({width:i.width,height:i.height}).css({position:"relative"})):d.prepend('<img style="position:relative" title="点击查看源网页" src="'+a.pic_url+'"/>')}else m[o]&&"success"==m[o].status?d.prepend(m[o].img.attr({width:i.width,height:i.height}).css({position:"relative"})):d.prepend('<img style="position:relative" title="点击查看源网页" src="'+a.pic_url+'"/>');d.find("img").first().attr({width:i.width,height:i.height});var n=b-(b-i.width)/2-100+24,p=(c-i.height)/2-28;k.css({top:p+"px",left:n+"px"}),"搞笑"==category&&(i.height<c?(h.css({height:c}),d.css({height:c}),e.css({height:c-20}),f.css({height:c-20}),g.css("height",c+Constant.botInfoHeight+Constant.headHeight),j.css("height",c+Constant.botInfoHeight+Constant.headHeight-30)):(d.css({height:i.height}),e.css({height:i.height-20}),f.css({height:i.height-20}),g.css({height:i.height+Constant.botInfoHeight+Constant.headHeight+30}),j.css({height:i.height+Constant.botInfoHeight+Constant.headHeight}),h.css({height:i.height}))),utils.scrollTop(0)},removeExpireCacheImg:function(a,b){if(a>=0&&a!=b){var c=b-a,d=(o+c)%n;d=d<0?d+n:d;var e=Math.abs(c);if(e>=n)for(var f=0;f<n;f++)m[f]=null;else for(var g=c<0?d:o,h=0;h<e;h++)m[(g+h)%n]=null;o=d}},cacheNextImg:function(a){for(var e=a.length,f=0;f<e;f++){var g=a[f];a[f]instanceof Array&&(g=a[f][0]);var h=(o+f)%n;if(!m[h]&&g&&function(a,e){var f=a.rindex;m[e]={status:"loading",begin:(new Date).getTime(),did:f},$.imgpreload(a.ori_pic_url,{each:function(){var g=$(this).data("loaded")?"success":"error";"success"!=g||this.width==a.width&&this.height==a.height||(g="daolian");var h=m[e];if(h&&h.did==f){if(h.img=$(this),h.status=g,h.end=(new Date).getTime(),currentDid==f&&"success"==g){var i=utils.zoomImg(b,c,a.width,a.height);"搞笑"==category&&(i=utils.zoomImgByWidth(b,c,a.width,a.height)),d.find("img").first().remove(),d.prepend(m[o].img.attr({width:i.width,height:i.height,title:"点击查看源网页"}).css({position:"relative"}))}uigsPB("lt="+g+"|"+a.ori_pic_url)}}})}(g,h),!m[h].grp&&a[f]&&a[f]instanceof Array)for(var i=0;i<a[f].length;i++)!function(a,e,f){var h=g.rindex;m[e].grp||(m[e].grp=[]),m[e].grp[f]={status:"loading",begin:(new Date).getTime(),did:h},$.imgpreload(a.ori_pic_url,{each:function(){var g=$(this).data("loaded")?"success":"error";"success"!=g||this.width==a.width&&this.height==a.height||(g="daolian");var i=m[e].grp[f];if(i&&i.did==h){if(i.img=$(this),i.status=g,i.end=(new Date).getTime(),currentDid==h&&currentGroupDid==f&&"success"==g){var j=utils.zoomImg(b,c,a.width,a.height);d.find("img").first().remove(),d.prepend(m[o].grp[f].img.attr({width:j.width,height:j.height,title:"点击查看源网页"}).css({position:"relative"}))}uigsPB("lt="+g+"|"+a.ori_pic_url)}}})}(a[f][i],h,i)}},pgLft:function(a){a?e.show():e.hide()},pgRgt:function(a){a?f.show():f.hide()},changeTitle:function(a){var c=[];c.push('<a href="'+a.page_url+'" target="_blank">'+utils.cutString(a.title,80)+"</a>"),void 0!==a.gindex&&c.push("<span>（"+(a.gindex+1)+"/"+a.glen+"）</span>"),i.html(c.join("")),i.width()>400?$("#btnsArea").hide():$("#btnsArea").show(),isIE6?i.css("margin-left",(b-180-i.width())/4):i.css("margin-left",(b-180-i.width())/2)}});var p=this;d.bind("mouseenter",function(){p.isInImgDetail=!0}).bind("mouseleave",function(){p.isInImgDetail=!1}),e.bind("mouseenter",function(){p.isInImgDetail=!0}).bind("mouseleave",function(){p.isInImgDetail=!1}),f.bind("mouseenter",function(){p.isInImgDetail=!0}).bind("mouseleave",function(){p.isInImgDetail=!1}),l.on("click",function(){var a=d.find("img:first").attr("src");location.href="http://pic.sogou.com/ris?flag=1&from=category_detail&query="+encodeURIComponent(a)}),l.on("mouseenter",function(){d.find(".circle").hide()}),ImgDetail._initialized=!0}}function RightContent(){var a=$("#tag_div"),b=$(".change"),c=$("#pic_box"),d=$("#viewSource"),e=0;void 0===RightContent._initialized&&($.extend(RightContent.prototype,{changeInfos:function(a){""==a.title?document.title=tag+"-搜狗图片":document.title=a.title+"-"+tag+"-搜狗图片",$("#right_pic_title").html(utils.cutString(a.title,46)),$("#right_pic_link").attr("href",a.page_url),$("#buyLink").attr("href",a.page_url),d.attr("href",a.page_url),this.changeTags(a)},changeTags:function(b){for(var c=[],d=0;d<b.tags.length&&d<6;d++){var e="/pics/recommend?category="+encodeURIComponent(category)+"#"+encodeURIComponent(b.tags[d]);c.push('<a href="'+e+'" class="tag"  uigs="image_tag">'),c.push("<span>"+b.tags[d]+"</span>"),c.push("</a>")}c.push('<a href="javascript:void(0)" class="tag-add"><em id="add_em" style="display:none"></em></a>'),c.push('<div class="add-box" style="display:none"><input type="text" class="add" style="width:154px"></input><a href="javascript:void(0)" class="add-btn" >推荐</a></div>'),a.empty(),a.html(c.join("")),isIE6||a.find(".tag").each(function(a,b){$(b).bind("mouseenter",function(){$(this).addClass("tag-on")}).bind("mouseleave",function(){$(this).removeClass("tag-on")})}),a.find(".add-btn").bind("click",function(){uigsPB("add_tag|"+$(".add").val()+"|"+b.pic_url),$(".add").val("感谢您的推荐！"),setTimeout(function(){$("#add_em").hide(),$(".add-box").hide()},500)}),a.find(".tag-add").bind("click",function(){$(".add").val(""),$("#add_em").show(),$(".add-box").show()})},changeRelationPic:function(){for(var a=[],b=e*Constant.rightThumbNum;b<(e+1)*Constant.rightThumbNum;b++){var d=randomList?randomList[b]:null;if(null!=d){var f=utils.zoomImgBig(Constant.rightThumbWidth,Constant.rightThumbHeight,d.bthumb_width,d.bthumb_height);if(d.zoomThumbWidth=f.width,d.zoomThumbHeight=f.height,d.zoomThumbLeft=(Constant.rightThumbWidth-f.width)/2,Constant.rightThumbHeight>=f.height)d.zoomThumbTop=(Constant.rightThumbHeight-f.height)/2;else{var g=.06*f.height;2*g+Constant.rightThumbHeight<=f.height?d.zoomThumbTop=0-g:d.zoomThumbTop=(Constant.rightThumbHeight-f.height)/2}a.push("<li>");var h=category;"美女直播"==h&&(h="美女"),a.push('<a uigs="relation_pic" href="/pics/recompic/detail.jsp?category='+encodeURIComponent(h)+"&tag="+encodeURIComponent(d.tags[0])+"&rpa="+d.id+"#6"+encodeURIComponent("&")+d.id+'">'),a.push('<img src="'+d.bthumbUrl+'" width="'+d.zoomThumbWidth+'" height="'+d.zoomThumbHeight+'"  style="left:'+d.zoomThumbLeft+"px; top:"+d.zoomThumbTop+'px;">'),a.push("</a>"),a.push("</li>")}}c.html(a.join("")),e=(e+1)%4}}),RightContent._initialized=!0),this.changeRelationPic(),isIE6&&b.hide();var f=this;b.bind("click",function(){f.changeRelationPic(),uigsPB("relation_change")})}function BotViewList(){var a=!0,b=$("#list-wrap"),c=$(".list-area"),d=$("#viewList"),e=$("#thumb_left"),f=$("#thumb_right"),g=$("#btnHide"),h=0;this.groupBegin=0;if(void 0===BotViewList._initialized){$.extend(BotViewList.prototype,{isShow:function(){return a},renderOneLine:function(a,b,c){d.empty();var e=a.length;h=e;for(var f=0,g=0,i=0,j=0;j<e;j++)a[j]instanceof Array&&a[j].rindex==b&&(g=a[j].length,i=j);g>0&&i+currentGroupDid+3>picNum&&(f=i+currentGroupDid+3-picNum);for(var j=0;j<e;j++)a[j]instanceof Array&&a[j].rindex==b?(d.append(this.renderGrpArea(a[j],currentGroupDid,f)),beginGroupIndex=f-1,f=0):f>0?f--:d.append(this.renderItem(a[j],a[j].rindex==b));c&&d.append(this.renderLast()),this.showLRButton()},renderItem:function(a,b){var c=[];c.push('<li id="p'+a.rindex+'" '),b&&c.push('class="focus"'),c.push(">"),c.push('<em class="mask"></em>'),c.push(this.renderItemWithOutLi(a)),c.push("</li>");var d={did:a.rindex};if(a instanceof Array?d.gdid=0:d.gdid=-1,0==new RegExp("test").test("test"))return"";var e=$(c.join("")).bind("click",d,clickLi);return b||e.bind("mouseenter",function(){$(this).addClass("focus")}).bind("mouseleave",function(){$(this).removeClass("focus")}),e},renderItemWithOutLi:function(a){var b=[];return a instanceof Array&&b.push('<span class="fold">'+a.length+"张</span>"),b.push('<a id="li_a_'+a.rindex+'" href="javascript:void(0)"'),b.push('><img onerror="imgOnError(this)" src="'),a instanceof Array?(null!=a[0].bthumbUrl?b.push(a[0].bthumbUrl):b.push(a[0].sthumbUrl),b.push('" width="'),b.push(a[0].zoomThumbWidth),b.push('" height="'),b.push(a[0].zoomThumbHeight),b.push('" style="margin-top:'),b.push(a[0].zoomThumbTop),b.push("px;margin-left:"),b.push(a[0].zoomThumbLeft)):(null!=a.bthumbUrl?b.push(a.bthumbUrl):b.push(a.sthumbUrl),b.push('" width="'),b.push(a.zoomThumbWidth),b.push('" height="'),b.push(a.zoomThumbHeight),b.push('" style="margin-top:'),b.push(a.zoomThumbTop),b.push("px;margin-left:"),b.push(a.zoomThumbLeft)),b.push('px"/>'),b.push("</a>"),b.join("")},renderLast:function(){return $('<li last="true"><span><img src="/home/images/end/img_end.jpg" width="80" height="80"><span class="thmb_v2"></span></span><span class="list_cur"></span></li>')},renderGrpItem:function(a,b){var c=[];return c.push('<li gindex="'+a.gindex+'"'),b&&c.push(' class="focus" '),c.push(">"),c.push('<em href="javascript:void(0)" class="mask"></em>'),b&&c.push('<span class="fold">'+(a.gindex+1)+"/"+a.glen+"</span>"),c.push('<a href="javascript:void(0)" >'),c.push('<img src="'+a.bthumbUrl+'"'),c.push('width="'+a.zoomThumbWidth+'"'),c.push('height="'+a.zoomThumbHeight+'" '),c.push(' style="margin-top:'+a.zoomThumbTop+"px;margin-left:"+a.zoomThumbLeft+'px"'),c.push("/></a></li>"),$(c.join("")).bind("click",{did:a.rindex,gdid:a.gindex},clickLi)},renderGrpArea:function(a,b,c){void 0===c&&(c=0),expendGroupIndex=a.rindex;var d=$("#p"+a.rindex).empty().unbind("click"),e=75*(a.length-c)+20;0==d.length&&(d=$('<li id="p'+a.rindex+'" class="unfold_list" glen="'+a.length+'" style="width:'+e+'px;"/>'));var f=[];f.push('<div class="scroll_box" style="width:'+(e-20)+'px;">'),f.push('<ul class=" scroll_in clearfix" style=" width:'+e+'px;">'),f.push("</ul>"),f.push("</div>"),d.append($(f.join("")));var g=d.find("ul");this.groupBegin=0;for(var h=c;h<a.length;h++){var i=a[h];g.append(this.renderGrpItem(i,b==h))}d.css({width:e+"px"});return d},updateGrpArea:function(a,b,c){var d=$("#p"+a.rindex),e=d.find("ul");e.find("li"),e.empty();var f=b>0?b-1:0;void 0!=c&&(f=c),f+4>a.length&&(f=a.length-4),f<0&&(f=0),this.groupBegin=f;for(var g=0;g<a.length;g++){var h=a[g];e.append(this.renderGrpItem(h,b==g))}return d},show:function(){a=!0,g.attr("title","收起导航条"),b.animate({bottom:"-0px"},200),c.show(),b.removeClass("hide")},hide:function(){a=!1,g.attr("title","展开导航条"),"搞笑"!=category&&b.animate({bottom:"-100px"},200),b.addClass("hide")},isFirstGroup:function(){return d.find(">li:first").find("li").length>0},isFirstMissGroup:function(){var a=d.find(">li:first").find("li").length;return 0!=a&&a!=d.find(">li:first").attr("glen")},isFirstFullGroup:function(){return d.find(">li:first").attr("id").replace("p","")-expendGroupIndex==0},isLastGroup:function(){return d.find(">li:last").find("li").length>0},removeFirstGroup:function(){if(1==d.find(">li:first").find("li").length)d.find(">li:first").unbind("click").unbind("mouseenter").unbind("mouseleave").empty().remove(),beginIndex++;else{var a=d.find(">li:first").width();d.find(">li:first").width(a-85),d.find(">li:first").find(".scroll_box").width(a-20-85),d.find(">li:first").find("ul").width(a-85),d.find(">li:first").find("li:first").unbind("click").unbind("mouseenter").unbind("mouseleave").empty().remove()}},removeLastGroup:function(){var a=d.find(">li:last").width();d.find(">li:last").width(a-85),d.find(">li:last").find(".scroll_box").width(a-20-85),d.find(">li:last").find("ul").width(a-85),d.find(">li:last").find("li:last").unbind("click").unbind("mouseenter").unbind("mouseleave").empty().remove()},removeLi:function(a){if(a>0)if(d.find(">li:first").find("li").length>1){var b=d.find(">li:first").width();d.find(">li:first").width(b-85),d.find(">li:first").find(".scroll_box").width(b-20-85),d.find(">li:first").find("ul").width(b-85),d.find(">li:first").find("li:first").unbind("click").unbind("mouseenter").unbind("mouseleave").empty().remove()}else d.find(">li:first").unbind("click").unbind("mouseenter").unbind("mouseleave").empty().remove();else if(a<0)if(d.find(">li:last").find("li").length>1){var b=d.find(">li:last").width();d.find(">li:last").width(b-85),d.find(">li:last").find(".scroll_box").width(b-20-85),d.find(">li:last").find("ul").width(b-85),d.find(">li:last").find("li:last").unbind("click").unbind("mouseenter").unbind("mouseleave").empty().remove()}else d.find(">li:last").unbind("click").unbind("mouseenter").unbind("mouseleave").empty().remove()},addFirstGroupLi:function(a){var b=d.find(">li:first").width();d.find(">li:first").width(b+85),d.find(">li:first").find(".scroll_box").width(b+20+85),d.find(">li:first").find("ul").width(b+85),d.find(">li:first").find("ul").prepend(a)},addLi:function(a,b){a>0?d.append(b):a<0&&d.prepend(b)},isLastIn:function(){return"true"==d.find(">li:last").attr("last")},isIn:function(a,b){var c=d.find("#p"+a).length>0;return void 0===b||-1==b||0==c?c:(c=!1,d.find("#p"+a).find("li").each(function(a,d){$(d).attr("gindex")==b&&(c=!0)}),c)},grpChangePage:function(a){var b=a.data.self,c=a.data.item,d=currentGroupDid,e=a.data.direct;b.updateGrpArea(c,d,b.groupBegin+e)},needHideLButton:function(){if(!this.isIn(0))return!1;var a=d.find("#p0").attr("glen");return!(a&&a>0)||this.isIn(0,0)},needHideRButton:function(){return d.find("li").size()<=picNum&&this.isLastIn()},showLRButton:function(){this.needHideLButton()?e.hide():e.show(),this.needHideRButton()?f.hide():f.show()}});var i=this;d.bind("mouseenter",function(){i.isInBotViewList=!0}).bind("mouseleave",function(){i.isInBotViewList=!1}),BotViewList._initialized=!0}}function ToolBar(){var a=$("#saveToPc"),b=$("#shareBox"),c=$("#shareArea"),d=$("#sinaShare"),e=$("#renrenShare"),f=$("#kongjianShare"),g=!!window.ActiveXObject,h=g&&!window.XMLHttpRequest,i=(g&&document.documentMode,null);void 0===ToolBar._initialized&&($.extend(ToolBar.prototype,{downloadToPc:function(){var a=dataManager.getDataByIndex(currentDid,currentGroupDid),b=Math.floor(4*Math.random())+1,c="http://imgstore0"+b+".cdn.sogou.com/v2/thumb/dl/"+a.id+".jpg?appid=10150005&referer=sogou.com&url="+a.pic_url;h?window.open(c):location.href=c,uigsPB("downloadtopc")},shareEnter:function(){c.show()},shareLeave:function(){i=setTimeout(function(){$("#shareArea").hide()},100)},shareAreaEnter:function(){null!=i&&clearTimeout(i)},shareSNS:function(a){var b=a.data.type,c=dataManager.getDataByIndex(currentDid,currentGroupDid),d="%E6%9F%A5%E7%9C%8B%E9%AB%98%E6%B8%85%E5%A4%A7%E5%9B%BE%EF%BC%8C%E7%8C%9B%E5%87%BB%EF%BC%9A";switch(b){case"sohu":uigsPB("sohushare"),window.open("http://t.sohu.com/third/post.jsp?link="+encodeURIComponent(location.href)+"&title="+d+"&pic="+encodeURIComponent(c.pic_url));break;case"sina":uigsPB("sinashare"),window.open("http://service.weibo.com/share/share.php?appkey=3455933708&pic="+encodeURIComponent(c.pic_url)+"&url="+encodeURIComponent(location.href)+"&title="+d);break;case"renren":uigsPB("renrenshare"),window.open("http://share.renren.com/share/buttonshare/post/4001?url="+encodeURIComponent(location.href)+"&title="+d+"&content="+d+"&pic="+encodeURIComponent(c.pic_url));break;case"kongjian":uigsPB("kongjianshare"),window.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+d+"&url="+encodeURIComponent(location.href)+"&rpic="+encodeURIComponent(c.pic_url));break;case"tencent":uigsPB("tencentshare"),window.open("http://v.t.qq.com/share/share.php?&title="+d+"&url="+encodeURIComponent(location.href)+"&pic="+encodeURIComponent(c.pic_url)+"&appkey=dcba10cb2d574a48a16f24c9b6af610c")}this.shareBox.hasClass("on")&&this.shareBox.removeClass("on")}}),ToolBar._initialized=!0);var j=this;a.bind("click",function(a){j.downloadToPc(a)}),b.bind("mouseenter",function(){j.shareEnter.apply(j)}).bind("mouseleave",function(){j.shareLeave.apply(j)}),c.bind("mouseenter",function(){j.shareAreaEnter.apply(j)}).bind("mouseleave",function(){j.shareLeave.apply(j)}),d.bind("click",{type:"sina"},function(a){j.shareSNS(a)}),e.bind("click",{type:"renren"},function(a){j.shareSNS(a)}),f.bind("click",{type:"kongjian"},function(a){j.shareSNS(a)})}function resize(a){var b=utils.getViewWidth(),c=utils.getViewHeight();if(b<Constant.minWidth?(b=Constant.minWidth,Constant.rightContentWidth=0):Constant.rightContentWidth=300,c<Constant.minHeight&&(c=Constant.minHeight),Math.abs(viewSize.width-b)>=18||Math.abs(viewSize.height-c)>=18||a){clearInterval(effectTimeout),effectTimeout=null,viewSize.width=b<Constant.minWidth?Constant.minWidth:b,viewSize.height=c<Constant.minHeight?Constant.minHeight:c,viewPort.resize(viewSize.width,viewSize.height),imgDetail.resize(viewSize.width,viewSize.height,botViewList.isShow());var d=Math.ceil((viewSize.width-Constant.rightContentWidth-84)/(Constant.thumbBlockWidth+Constant.thumbBlockMargin));picNum=d;var e=Math.floor(picNum/2);midIndex=e>=1?e-1:e<0?0:e,dataManager.getDataByDid(currentDid,!1);var f=getFirstRenderIndex(picNum,midIndex,maxEnd,currentDid,currentGroupDid);dataManager.isReady(f)||dataManager.getDataByDid(f,!1);var g=f+picNum-1;!dataManager.isReady(g)&&g<=maxEnd-1&&dataManager.getDataByDid(g,!1),beginIndex=f;var h=g>=maxEnd?maxEnd-1:g;botViewList.renderOneLine(dataManager.getData(beginIndex,h),currentDid,g>=maxEnd);var i=dataManager.getDataByIndex(currentDid,currentGroupDid);controlLftRgt(i.rindex,i.gindex,maxEnd,i.glen),imgDetail.firstShowPic(i),botViewList.isShow()&&botViewList.show(),imgDetail.changeTitle(i),rightContent.changeInfos(i);var j=[currentDid];-1!=currentGroupDid&&(j.push("_"),j.push(currentGroupDid)),j.push("&"),j.push(i.id),"壁纸"==category&&(j.push("&"),j.push(resolutionIndex)),location.hash=encodeURIComponent(j.join(""))}}function getFirstRenderIndex(a,b,c,d,e){var f=0;return b>=d?f=0:d-b+a>c?(f=c-a)<0&&(f=0):f=d-b,-1!=e&&d+e-f>a&&(f=d),f}function clickLi(a){changePic(a.data.did,a.data.gdid,"thumb_click"),uigsPB("thumb_click")}function nextPic(a){var b;b="number"!=typeof a?a.data.direct:a;var c=dataManager.getDataByIndex(currentDid,-1);if(b>0)if(c instanceof Array&&currentGroupDid<c.length-1)changePic(currentDid,currentGroupDid+1);else{var d=dataManager.getDataByIndex(currentDid+1,-1);d instanceof Array?changePic(currentDid+1,0):changePic(currentDid+1,-1)}if(b<0)if(c instanceof Array&&currentGroupDid>0)changePic(currentDid,currentGroupDid-1);else{var d=dataManager.getDataByIndex(currentDid-1,-1);d instanceof Array?changePic(currentDid-1,0):changePic(currentDid-1,-1)}}function nextThumb(a){var b;b="number"!=typeof a?a.data.direct:a,moveOneThumb(b)}function changePic(a,b,c){var d=(dataManager.getDataByIndex(currentDid,currentGroupDid),dataManager.getDataByIndex(a,b)),e=d;uigsPB("change_pic"),void 0!==c&&"thumb_click"==c||fanyeTimes++,3==fanyeTimes&&botViewList.isShow()&&$("#btnHide").trigger("click"),imgDetail.changeBigPic(currentDid,d),controlLftRgt(e.rindex,e.gindex,maxEnd,e.glen);var f=e.rindex-currentDid;0==f&&(f=b-currentGroupDid),currentDid=e.rindex,currentGroupDid=b,beginIndex=getFirstRenderIndex(picNum,midIndex,maxEnd,currentDid,currentGroupDid);var g=beginIndex+picNum-1,h=g>=maxEnd?maxEnd-1:g;f>0&&h<maxEnd-1?(dataManager.getDataByIndex(h+1,-1)||dataManager.getDataByDid(h,!1),h+12<maxEnd-1&&(dataManager.getDataByIndex(h+13,-1)||dataManager.getDataByDid(h+13,!0))):f<0&&beginIndex>0&&(dataManager.getDataByIndex(beginIndex-1,-1)||dataManager.getDataByDid(beginIndex-1,!1),beginIndex-13>=0&&(dataManager.getDataByIndex(beginIndex-13,-1)||dataManager.getDataByDid(beginIndex-13,!0))),botViewList.renderOneLine(dataManager.getData(beginIndex,h),currentDid,g>=maxEnd),imgDetail.changeTitle(e),rightContent.changeInfos(e),rightContent.changeRelationPic();var i=[currentDid];-1!=currentGroupDid&&(i.push("_"),i.push(currentGroupDid)),i.push("&"),i.push(e.id),"壁纸"==category&&(i.push("&"),i.push(resolutionIndex)),location.hash=encodeURIComponent(i.join(""))}function controlLftRgt(a,b,c,d){a<=0&&b<=0?imgDetail.pgLft(!1):imgDetail.pgLft(!0),a<c-1?imgDetail.pgRgt(!0):b<d-1?imgDetail.pgRgt(!0):imgDetail.pgRgt(!1)}function effect(){moveOneThumb(currentDid-beginIndex-midIndex)}function moveOneThumb(a){var b=beginIndex+picNum-1;if(!(0==a||a<0&&botViewList.needHideLButton()||a>0&&botViewList.needHideRButton())){if(a>0&&b<maxEnd-1?(dataManager.getDataByIndex(b+1,-1)||dataManager.getDataByDid(b,!1),b+12<maxEnd-1&&(dataManager.getDataByIndex(b+13,-1)||dataManager.getDataByDid(b+13,!0))):a<0&&(dataManager.getDataByIndex(beginIndex-1,-1)||dataManager.getDataByDid(beginIndex-1,!1),beginIndex-13>=0&&(dataManager.getDataByIndex(beginIndex-13,-1)||dataManager.getDataByDid(beginIndex-13,!0))),a>0)if(botViewList.isFirstGroup()?(botViewList.removeFirstGroup(),beginGroupIndex++):(botViewList.removeLi(a),beginIndex++),b>=maxEnd-1)botViewList.isLastIn()||botViewList.addLi(a,botViewList.renderLast());else{var c=dataManager.getDataByIndex(b+1,-1);botViewList.isIn(c.rindex)||botViewList.addLi(a,botViewList.renderItem(c,currentDid==c.rindex))}else if(a<0){var c;botViewList.isFirstGroup()&&botViewList.isFirstMissGroup()?(c=dataManager.getDataByIndex(beginIndex,beginGroupIndex),botViewList.addFirstGroupLi(botViewList.renderGrpItem(c,currentGroupDid==c.gindex)),beginGroupIndex--):(c=dataManager.getDataByIndex(beginIndex-1,-1),botViewList.addLi(a,botViewList.renderItem(c,currentDid==c.rindex)),beginIndex--)}botViewList.showLRButton()}}function mousescroll(a){a=a||window.event,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;var b=0;a.wheelDelta?b+=a.wheelDelta:a.detail&&(b-=a.detail),botViewList.isInBotViewList&&!imgDetail.isInImgDetail?(utils.preventDefault(a),moveOneThumb(0-b)):!botViewList.isInBotViewList&&imgDetail.isInImgDetail&&(utils.preventDefault(a),nextPic(0-b))}var utils={zoomImgBig:function(a,b,c,d){if(c<=a||d<=b)return{width:c,height:d};var e=a/b,f=c/d;return e>f?{width:a,height:a*d/c}:e<f?{width:b*c/d,height:b}:{width:a,height:b}},zoomImg:function(a,b,c,d){if(c<=a&&d<=b)return{width:c,height:d};var e=a/b,f=c/d;return e>f?{width:c*b/d,height:b}:e<f?{width:a,height:a*d/c}:{width:a,height:b}},zoomImgByWidth:function(a,b,c,d){return c<=a?{width:c,height:d}:{width:a,height:a*d/c}},zoomItem:function(a){if(a.width&&a.height||(a.width=220,a.height=148),!a.thumb_width||!a.thumb_height||0==a.thumb_width||0==a.thumb_height)if(a.width*a.height>48400){var b=220/a.width;a.thumb_width=Math.floor(a.width*b),a.thumb_height=Math.floor(a.height*b)}else a.thumb_width=a.width,a.thumb_height=a.height;var c=utils.zoomImgBig(Constant.thumbWidth,Constant.thumbHeight,a.bthumb_width,a.bthumb_height);if(a.zoomThumbWidth=c.width,a.zoomThumbHeight=c.height,a.zoomThumbLeft=(Constant.thumbWidth-c.width)/2,Constant.thumbHeight>=c.height)a.zoomThumbTop=(Constant.thumbHeight-c.height)/2;else{var d=.06*c.height;2*d+Constant.thumbHeight<=c.height?a.zoomThumbTop=0-d:a.zoomThumbTop=(Constant.thumbHeight-c.height)/2}return a},getTop:function(){var a=document;return window.pageYOffset||a.documentElement.scrollTop||a.body.scrollTop},scrollTop:function(a){$("html,body").animate({scrollTop:a},0)},getViewWidth:function(){var a=document;return("BackCompat"==a.compatMode?a.body:a.documentElement).clientWidth},getViewHeight:function(){var a=document;return("BackCompat"==a.compatMode?a.body:a.documentElement).clientHeight},encodeHTML:function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},cutString:function(a,b){var c=a.length,d=0;if(a){for(var e=0;e<c&&(a.charCodeAt(e)>255?d+=2:d++,!(d>b));e++);if(d>b){for(;d>b-3;)a.charCodeAt(e--)>255?d-=2:d--;return a.substring(0,e+1)+"..."}return a}return""},getSite:function(a){if(a){var b=a.indexOf("://");b>0&&(a=a.substring(b+3));var c=a.indexOf("/");return c>0&&(a=a.substring(0,c)),a}return""},getPicSize:function(a){return parseInt(a/1024)+"KB"},getPicExt:function(a){var b="";if(a&&""!=a){var c=a.lastIndexOf("."),d=a.lastIndexOf("/");c>0&&d<c&&(b=a.substring(c+1).toLowerCase())}return(""==b||"jpg"!=b&&"gif"!=b&&"png"!=b&&"bmp"!=b)&&(b="jpg"),b},preventDefault:function(a){navigator.userAgent.toLowerCase().indexOf("msie")>=0?event.returnValue=!1:a.preventDefault()},stopPropa:function(a){a=a||window.event,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}},isIE=!!window.ActiveXObject,isIE6=isIE&&!window.XMLHttpRequest,isIE7=isIE&&"7.0"==$.browser.version,resolutionArr=[{w:window.screen.width,h:window.screen.height},{w:1024,h:768},{w:1152,h:864},{w:1280,h:720},{w:1280,h:768},{w:1280,h:800},{w:1280,h:960},{w:1280,h:1024},{w:1360,h:768},{w:1366,h:768},{w:1440,h:900},{w:1600,h:900},{w:1680,h:1050},{w:1920,h:1080},{w:1920,h:1200}],hash=decodeURIComponent(location.hash.replace(/^#/,"")),did=0,fanyeTimes=0,imageid=-1,groupIndex=-1,resolutionIndex=-1;if("壁纸"==category&&(resolutionIndex=0),hash&&""!=hash){if(hashArr=hash.split("&"),hashArr[0].indexOf("_")>0){var values=hashArr[0].split("_");did=parseInt(values[0]),groupIndex=parseInt(values[1])}else did=parseInt(hashArr[0]),groupIndex=-1;imageid=parseInt(hashArr[1]),hashArr&&hashArr.length>=4&&(resolutionIndex=parseInt(hashArr[2]))}var currentDid=did,currentGroupDid=groupIndex,viewSize={width:utils.getViewWidth(),height:utils.getViewHeight()},Constant={headHeight:63,contentBorder:2,titleInfoHeight:76,botInfoHeight:132,viewListHeight:121,thumbBlockWidth:70,thumbBlockMargin:5,thumbBlockTop:20,thumbWidth:70,thumbHeight:70,rightThumbWidth:80,rightThumbHeight:80,minHeight:420,minWidth:1240,rightContentWidth:280,rightThumbNum:9},dataManager=new DataManager,isInBotViewList=!1,rightContent=new RightContent,toolBar=new ToolBar,viewPort=new ViewPort,imgDetail=new ImgDetail,botViewList=new BotViewList,picNum,midIndex,beginIndex,beginGroupIndex=-1,expendGroupIndex=-1,maxEnd,effectTimeout=null;resize(!0),$(window).bind("hashchange",function(){var a,b=decodeURIComponent(location.hash.replace(/^#/,"")),c=-1;if(b&&""!=b){if(hashArr=b.split("&"),hashArr[0].indexOf("_")>0){var d=hashArr[0].split("_");a=parseInt(d[0]),c=parseInt(d[1])}else a=parseInt(hashArr[0]),c=-1;currentDid==a&&currentGroupDid==c||changePic(a,c)}}),$(window).bind("resize",function(){resize()}),$("#thumb_left").bind("click",function(){clearInterval(effectTimeout),effectTimeout=null,moveOneThumb(-1),uigsPB("thumb_left")}),$("#thumb_right").bind("click",function(){clearInterval(effectTimeout),effectTimeout=null,moveOneThumb(1),uigsPB("thumb_right")}),$("#btnHide").bind("click",function(){botViewList.isShow()?botViewList.hide():botViewList.show(),imgDetail.resize(viewSize.width,viewSize.height,botViewList.isShow())}),$(document).bind("keydown",function(a){var b=a.keyCode;switch(37!=b&&38!=b&&39!=b&&40!=b||(utils.stopPropa(a),utils.preventDefault(a)),b){case 38:nextPic(-1),uigsPB("changepic_keyup");break;case 40:nextPic(1),uigsPB("changepic_keydown");break;case 37:nextPic(-1),uigsPB("changepic_keyleft");break;case 39:nextPic(1),uigsPB("changepic_keyright")}}),"搞笑"!=category&&(document.addEventListener&&document.addEventListener("DOMMouseScroll",mousescroll,!1),window.onmousewheel=document.onmousewheel=mousescroll),"文艺"!==tag&&"少女"!==tag&&"LOFTER"!==category||$("#saveToPc").hide()}var uigs_clpingbackurl="//pb.sogou.com/cl.gif",uigs_pvpingbackurl="//pb.sogou.com/pv.gif",uigs_version="v1.1",uigs_staytime=(new Date).getTime();"undefined"!=typeof uigs_para&&void 0!==uigs_para.uigs_clpingbackurl&&""!==uigs_para.uigs_clpingbackurl&&(uigs_clpingbackurl=uigs_para.uigs_clpingbackurl),"undefined"!=typeof uigs_para&&void 0!==uigs_para.uigs_pvpingbackurl&&""!==uigs_para.uigs_pvpingbackurl&&(uigs_pvpingbackurl=uigs_para.uigs_pvpingbackurl);for(var uigs_cookieArray=new Array,uigs_acookie=document.cookie.split("; "),uigs_pbs=new Array,i=0;i<uigs_acookie.length;i++){var arr=uigs_acookie[i].split("=");uigs_cookieArray[arr[0]]=arr[1]}uigs_d=escape(1e3*(new Date).getTime()+Math.round(1e3*Math.random())),"undefined"!=typeof uigs_para&&void 0===uigs_para.uigs_uuid&&(uigs_para.uigs_uuid=uigs_d);var uigs_spv;"undefined"!=typeof uigs_pvflag&&uigs_pvflag||uigs_spv||uigs_pv(),uigs_spv=1,$uigs_d=document;var uigs_oldclick=$uigs_d.onclick;$uigs_d.onclick=function(a){var b;return uigs_oldclick&&(b=uigs_oldclick(a)),uigs_clickit(a),b};var uigs_clickit=function(a){if("undefined"!=typeof uigs_para&&void 0!==uigs_para.uigs_productid){if(a&&0!=a.button||!a&&0!=window.event.button)return;try{a=a||window.event;for(var b=a.target?a.target:a.srcElement,c="",d="",e="",f="",g="";""==c;){if(f=b.tagName.toUpperCase(),c||(c=b.uigs||b.getAttribute("uigs")||""),c&&"nouigs"==c)return;"A"!=f&&"LINK"!=f&&"AREA"!=f&&"INPUT"!=f&&"DIV"!=f||(e=f),b.href&&(g=b.href);try{if(e==uigs_para.uigs_pbtag){for(d=b.id||b.getAttribute("id")||"";""==d&&b.parentNode&&(b=b.parentNode,b.tagName);)d||(d=b.id||b.getAttribute("id")||"");break}}catch(a){}if(!b.parentNode)break;if(b=b.parentNode,!b.tagName)break}if(e&&c||e&&e==uigs_para.uigs_pbtag){var h="";""!=c&&(h+=c+"&"),""!=d&&(h+=d+"&"),uigsPB(h+"href="+g)}}catch(a){}}},uigs_al=!1,uigs_judgeBottom=function(){try{var a=uigs_iecompattest().clientHeight,b=uigs_iecompattest().scrollHeight,c=uigs_iecompattest().scrollTop;if(c>100&&b-a-c<100&&!uigs_al){uigs_al=!0;var d="",e=uigs_staytime;uigs_staytime<0&&(e=0-uigs_staytime),d="tob="+parseInt(((new Date).getTime()-e)/1e3),uigsPB(d)}}catch(a){}};"undefined"!=typeof jQuery&&function(a){a.imgpreload=function(b,c){c=a.extend({},a.fn.imgpreload.defaults,c instanceof Function?{all:c}:c),"string"==typeof b&&(b=new Array(b));var d=new Array;a.each(b,function(e,f){var g=new Image,h=f,i=g;"string"!=typeof f&&(h=a(f).attr("src"),i=f),a(g).bind("load error",function(e){d.push(i),a.data(i,"loaded","error"!=e.type),c.each instanceof Function&&c.each.call(i),d.length>=b.length&&c.all instanceof Function&&c.all.call(d),a(this).unbind("load error")}),g.src=h})},a.fn.imgpreload=function(b){return a.imgpreload(this,b),this},a.fn.imgpreload.defaults={each:null,all:null}}(jQuery);
//# sourceMappingURL=detail_2015_release.js.map